---
import { ViewTransitions } from 'astro:transitions';
interface Props { title?: string; }
const { title = "INSULAR STUDIO" } = Astro.props;
---
<!doctype html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<title>{title}</title>
		<link href="https://api.fontshare.com/v2/css?f[]=satoshi@400,500,700&display=swap" rel="stylesheet">
		<ViewTransitions />
	</head>
	<body>
		<header class="header">
			<a href="/" class="logo-link">
				<svg width="40" height="40" viewBox="0 0 98 98" fill="none">
					<path d="M0 97.0627L68.9353 97.0627L68.9353 28.6618L0 28.6618L0 97.0627Z" fill="#1E1E1E"/>
					<path d="M97.609 0H68.9762V28.6328H97.609V0Z" fill="#1E1E1E"/>
				</svg>
			</a>
			
			<button class="menu-toggle" id="menu-btn" aria-label="Menu">
				<span></span>
				<span></span>
			</button>

			<nav class="nav-container" id="nav-menu">
				<div class="nav-links">
					<a href="/insular">INSULAR</a>
					<a href="/" class="tipito-link"><img src="/img/tipito.png" alt="Work" /></a>
					<a href="/contacto">CONTACTO</a>
				</div>
			</nav>
		</header>

		<slot />

		<footer class="footer">
			<div class="footer-content">
				<div>© 2026 INSULAR STUDIO</div>
				<div class="footer-social">
					<a href="#">INSTAGRAM</a>
					<a href="#">BEHANCE</a>
				</div>
			</div>
		</footer>

		<script>
			// Esta función maneja el click del menú
			const setupMenu = () => {
				const btn = document.getElementById('menu-btn');
				const menu = document.getElementById('nav-menu');
				
				if (btn && menu) {
					btn.onclick = () => {
						btn.classList.toggle('open');
						menu.classList.toggle('active');
						document.body.classList.toggle('no-scroll');
					};
				}
			};

			// Se ejecuta al cargar la página y después de cada transición de Astro
			setupMenu();
			document.addEventListener('astro:after-swap', setupMenu);
		</script>

		<style is:global>
			:root {
				--margin: 50px; --gap: 15px; --space-xl: 120px;
				--bg: #F7F7F7; --black: #1E1E1E; --gray-light: #EBEBEB;
				--nav-size: 19px; 
			}
			* { box-sizing: border-box; margin: 0; padding: 0; }
			body { font-family: 'Satoshi', sans-serif; background: var(--bg); color: var(--black); -webkit-font-smoothing: antialiased; }
			body.no-scroll { overflow: hidden; }

			.header { display: flex; justify-content: space-between; align-items: center; padding: 8px var(--margin); position: sticky; top: 0; z-index: 1000; background: var(--bg); }
			.nav-links { display: flex; align-items: center; gap: 40px; }
			.nav-links a { text-decoration: none; color: var(--black); font-weight: 500; text-transform: uppercase; font-size: var(--nav-size); letter-spacing: 0.02em; }
			.tipito-link img { height: 42px; width: auto; }

			/* MENU HAMBURGUESA - BOTÓN */
			.menu-toggle { display: none; flex-direction: column; justify-content: center; gap: 6px; background: none; border: none; cursor: pointer; padding: 10px; z-index: 1200; width: 44px; height: 44px; }
			.menu-toggle span { width: 28px; height: 2px; background: var(--black); transition: all 0.3s ease; display: block; }

			/* MOBILE STYLES */
			@media (max-width: 1000px) {
				:root { --margin: 20px; }
				.menu-toggle { display: flex; }
				
				.nav-container { 
					position: fixed; top: 0; right: -100%; width: 100%; height: 100vh; 
					background: var(--bg); display: flex; align-items: center; justify-content: center; 
					transition: transform 0.6s cubic-bezier(0.77, 0, 0.175, 1); 
					z-index: 1100;
				}

				.nav-container.active { transform: translateX(-100%); }
				
				.nav-links { flex-direction: column; gap: 40px; }
				.nav-links a { font-size: 32px; }

				/* Transformar a X cuando está abierto */
				.menu-toggle.open span:nth-child(1) { transform: translateY(4px) rotate(45deg); }
				.menu-toggle.open span:nth-child(2) { transform: translateY(-4px) rotate(-45deg); }
			}

			/* Footer y otros */
			.footer { padding: 60px var(--margin); border-top: 1px solid rgba(0,0,0,0.1); font-size: 12px; }
			.footer-content { display: flex; justify-content: space-between; }
			.main-title { font-size: 48px; font-weight: 500; text-transform: uppercase; padding-top: 40px; margin-bottom: 40px; }
		</style>
	</body>
</html>